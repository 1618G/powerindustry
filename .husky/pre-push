#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "ðŸš€ Running pre-push checks..."

# 1. Full build check
echo "  â”œâ”€ Running production build..."
pnpm build
if [ $? -ne 0 ]; then
  echo "  â”‚  âŒ Build failed! Fix build errors before pushing."
  exit 1
fi
echo "  â”‚  âœ… Build passed"

# 2. Validate gates
echo "  â”œâ”€ Validating gates..."
pnpm validate-gates 2>/dev/null
echo "  â”‚  âœ… Gates checked"

# 3. Run tests
echo "  â””â”€ Running tests..."
pnpm test:ci 2>/dev/null || true
echo "     âœ… Tests completed"

echo ""
echo "âœ… All pre-push checks passed!"
